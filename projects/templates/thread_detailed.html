{% extends "base.html" %} {% block content %}
        

<!--starts here-->
      <div class="main">
        <div class="subforum-row">
          <div class="subforum-icon subforum-column center">
              <i class="fa fa-user center"></i>
          </div>
            {% if not edit and own %}
          <div class="subforum-description subforum-column">
              <h4><a href="{{ url_for('main.thread_detailed', thread_id=thread.id)}}">{{ thread.title }}</a></h4>
              <p>{{ thread.content }}</p>
              <div style="display: flex;">
                <button class="formbold-btn"><a href="{{ url_for('main.thread_edit', thread_id=thread.id)}}">Edit Thread</a></button>
                <form action="{{ url_for('main.del_thread', thread_id=thread.id) }}" method="POST">
                  <button class="formbold-btn" type="submit"><a>Delete Thread</a></button>
                </form>
              </div>

          </div>
          {% elif not edit and not own%}
          <div class="subforum-description subforum-column">
            <h4><a href="{{ url_for('main.thread_detailed', thread_id=thread.id)}}">{{ thread.title }}</a></h4>
            <p>{{ thread.content }}</p>
        </div>
          {% elif edit %}
          <div class="subforum-description subforum-column">
            <form action="{{ url_for('main.thread_update', thread_id=thread.id)}}" method="POST">
              <h4 id ="title" name="title"><a href="{{ url_for('main.thread_detailed', thread_id=thread.id)}}">{{ thread.title }}</a></h4>
              <textarea
              rows="6"
              name="title"
              id="title"
              class="formbold-form-input"
              value="{{ thread.title }}"
              placeholder="{{ thread.title }}"
              required
            >{{ thread.title }}</textarea>
              <p id="content" name="content">{{ thread.content }}</p>
              <textarea
              rows="6"
              name="content"
              id="content"
              class="formbold-form-input"
              value="{{ thread.content }}"
              placeholder="{{ thread.content }}"
            >{{ thread.content }}</textarea>
            <div style="display: flex;">
              <button type="submit" class="formbold-btn"><a>Save Thread</a></button>
            </form>
            <form action="{{ url_for('main.del_thread', thread_id=thread.id) }}" method="POST">
              <button class="formbold-btn" type="submit"><a>Delete Thread</a></button>
            </form>
            </div>
          </div>
          {% endif %}
          {% if thread.count == 1  %}
          <div class="subforum-stats subforum-column center">
              <span>{{ thread.count }} Comment </span>
          </div>
          {% endif %} {% if thread.count > 1 or thread.count == 0  %}
          <div class="subforum-stats subforum-column center">
              <span>{{ thread.count }} Comments </span>
          </div>
          {% endif %}
          <div class="subforum-info subforum-column">
              {% if thread.author.name %}
              <b><a href="">Last post</a></b> by <a href="">{{ thread.author.name }}</a> 
              {% else %}
              <b><a href="">Last post</a></b> by <a href="">Anonymous</a> 
              {% endif %}
              <br>on <small>{{ thread.date }}</small>
              
          </div>
      </div>
        {% for comment in thread.comments %}
        <div class="comment">
          <div class="top-comment">
          {% if comment.author.name %}
            <p class="user">{{comment.author.name}}</p>
          {% else %}
            <p class="user">Anonymous</p>
          {% endif %}
            <p class="comment-ts">{{comment.date}}</p>
          </div>
          <div class="comment-content" style="color: rgb(197, 71, 77);">{{comment.content}}</div>
        </div>
        {% endfor %}
        <form action="{{ url_for('main.add_comment', thread_id= thread.id ) }}" method="POST">
          <textarea id="content" name="content"></textarea>
          <button type="submit">Add Comment</button>
        </form>
      </div>
    <footer>
        <span>&copy;  BCIT | All Rights Reserved</span>
    </footer>

</body>
{% endblock %}